# "Environment Flags" part of the code file
#
# Provides functions to lookup and manipulate environment flags in Global Context.
#
# These flags are set by proximity effects like the Song of Storms effect.
#
# Starts at VRAM: 80059810 / VROM: ACF770
#

.include "macro.inc"

# assembler directives
.set noat      # allow manual use of $at
.set noreorder # don't insert nops after branches
.set gp=64     # allow use of 64-bit general purposee registers

.section .text

glabel func_80059810
/* 48770 80059810 00001025 */  or      $v0, $zero, $zero          ## $v0 = 00000000
/* 48774 80059814 3C030001 */  lui     $v1, 0x0001                ## $v1 = 00010000
.L80059818:
/* 48778 80059818 00027040 */  sll     $t6, $v0,  1
/* 4877C 8005981C 24420001 */  addiu   $v0, $v0, 0x0001           ## $v0 = 00000001
/* 48780 80059820 304200FF */  andi    $v0, $v0, 0x00FF           ## $v0 = 00000001
/* 48784 80059824 008E7821 */  addu    $t7, $a0, $t6
/* 48788 80059828 28410014 */  slti    $at, $v0, 0x0014
/* 4878C 8005982C 01E3C021 */  addu    $t8, $t7, $v1
/* 48790 80059830 1420FFF9 */  bne     $at, $zero, .L80059818
/* 48794 80059834 A70020FC */  sh      $zero, 0x20FC($t8)         ## 000020FC
/* 48798 80059838 03E00008 */  jr      $ra
/* 4879C 8005983C 00000000 */  nop


glabel func_80059840
/* 487A0 80059840 AFA50004 */  sw      $a1, 0x0004($sp)
/* 487A4 80059844 00052C00 */  sll     $a1, $a1, 16
/* 487A8 80059848 00052C03 */  sra     $a1, $a1, 16
/* 487AC 8005984C 04A10003 */  bgez    $a1, .L8005985C
/* 487B0 80059850 00057103 */  sra     $t6, $a1,  4
/* 487B4 80059854 24A1000F */  addiu   $at, $a1, 0x000F           ## $at = 0000000F
/* 487B8 80059858 00017103 */  sra     $t6, $at,  4
.L8005985C:
/* 487BC 8005985C 000E7C00 */  sll     $t7, $t6, 16
/* 487C0 80059860 000FC403 */  sra     $t8, $t7, 16
/* 487C4 80059864 0018C840 */  sll     $t9, $t8,  1
/* 487C8 80059868 00991021 */  addu    $v0, $a0, $t9
/* 487CC 8005986C 3C010001 */  lui     $at, 0x0001                ## $at = 00010000
/* 487D0 80059870 00411021 */  addu    $v0, $v0, $at
/* 487D4 80059874 944820FC */  lhu     $t0, 0x20FC($v0)           ## 000020FC
/* 487D8 80059878 04A10004 */  bgez    $a1, .L8005988C
/* 487DC 8005987C 30A9000F */  andi    $t1, $a1, 0x000F           ## $t1 = 00000000
/* 487E0 80059880 11200002 */  beq     $t1, $zero, .L8005988C
/* 487E4 80059884 00000000 */  nop
/* 487E8 80059888 2529FFF0 */  addiu   $t1, $t1, 0xFFF0           ## $t1 = FFFFFFF0
.L8005988C:
/* 487EC 8005988C 00095400 */  sll     $t2, $t1, 16
/* 487F0 80059890 000A5C03 */  sra     $t3, $t2, 16
/* 487F4 80059894 240C0001 */  addiu   $t4, $zero, 0x0001         ## $t4 = 00000001
/* 487F8 80059898 016C7804 */  sllv    $t7, $t4, $t3
/* 487FC 8005989C 010FC025 */  or      $t8, $t0, $t7              ## $t8 = 00000000
/* 48800 800598A0 A45820FC */  sh      $t8, 0x20FC($v0)           ## 000020FC
/* 48804 800598A4 03E00008 */  jr      $ra
/* 48808 800598A8 00000000 */  nop


glabel func_800598AC
/* 4880C 800598AC AFA50004 */  sw      $a1, 0x0004($sp)
/* 48810 800598B0 00052C00 */  sll     $a1, $a1, 16
/* 48814 800598B4 00052C03 */  sra     $a1, $a1, 16
/* 48818 800598B8 04A10003 */  bgez    $a1, .L800598C8
/* 4881C 800598BC 00057103 */  sra     $t6, $a1,  4
/* 48820 800598C0 24A1000F */  addiu   $at, $a1, 0x000F           ## $at = 0000000F
/* 48824 800598C4 00017103 */  sra     $t6, $at,  4
.L800598C8:
/* 48828 800598C8 000E7C00 */  sll     $t7, $t6, 16
/* 4882C 800598CC 000FC403 */  sra     $t8, $t7, 16
/* 48830 800598D0 0018C840 */  sll     $t9, $t8,  1
/* 48834 800598D4 00991021 */  addu    $v0, $a0, $t9
/* 48838 800598D8 3C010001 */  lui     $at, 0x0001                ## $at = 00010000
/* 4883C 800598DC 00411021 */  addu    $v0, $v0, $at
/* 48840 800598E0 944820FC */  lhu     $t0, 0x20FC($v0)           ## 000020FC
/* 48844 800598E4 04A10004 */  bgez    $a1, .L800598F8
/* 48848 800598E8 30A9000F */  andi    $t1, $a1, 0x000F           ## $t1 = 00000000
/* 4884C 800598EC 11200002 */  beq     $t1, $zero, .L800598F8
/* 48850 800598F0 00000000 */  nop
/* 48854 800598F4 2529FFF0 */  addiu   $t1, $t1, 0xFFF0           ## $t1 = FFFFFFF0
.L800598F8:
/* 48858 800598F8 00095400 */  sll     $t2, $t1, 16
/* 4885C 800598FC 000A5C03 */  sra     $t3, $t2, 16
/* 48860 80059900 240C0001 */  addiu   $t4, $zero, 0x0001         ## $t4 = 00000001
/* 48864 80059904 016C6804 */  sllv    $t5, $t4, $t3
/* 48868 80059908 39B8FFFF */  xori    $t8, $t5, 0xFFFF           ## $t8 = FFFFFFFF
/* 4886C 8005990C 0118C824 */  and     $t9, $t0, $t8
/* 48870 80059910 A45920FC */  sh      $t9, 0x20FC($v0)           ## 000020FC
/* 48874 80059914 03E00008 */  jr      $ra
/* 48878 80059918 00000000 */  nop


glabel func_8005991C
/* 4887C 8005991C AFA50004 */  sw      $a1, 0x0004($sp)
/* 48880 80059920 00052C00 */  sll     $a1, $a1, 16
/* 48884 80059924 00052C03 */  sra     $a1, $a1, 16
/* 48888 80059928 04A10003 */  bgez    $a1, .L80059938
/* 4888C 8005992C 00057103 */  sra     $t6, $a1,  4
/* 48890 80059930 24A1000F */  addiu   $at, $a1, 0x000F           ## $at = 0000000F
/* 48894 80059934 00017103 */  sra     $t6, $at,  4
.L80059938:
/* 48898 80059938 000E7C00 */  sll     $t7, $t6, 16
/* 4889C 8005993C 000FC403 */  sra     $t8, $t7, 16
/* 488A0 80059940 0018C840 */  sll     $t9, $t8,  1
/* 488A4 80059944 00994021 */  addu    $t0, $a0, $t9
/* 488A8 80059948 3C090001 */  lui     $t1, 0x0001                ## $t1 = 00010000
/* 488AC 8005994C 01284821 */  addu    $t1, $t1, $t0
/* 488B0 80059950 240D0001 */  addiu   $t5, $zero, 0x0001         ## $t5 = 00000001
/* 488B4 80059954 952920FC */  lhu     $t1, 0x20FC($t1)           ## 000120FC
/* 488B8 80059958 04A10004 */  bgez    $a1, .L8005996C
/* 488BC 8005995C 30AA000F */  andi    $t2, $a1, 0x000F           ## $t2 = 00000000
/* 488C0 80059960 11400002 */  beq     $t2, $zero, .L8005996C
/* 488C4 80059964 00000000 */  nop
/* 488C8 80059968 254AFFF0 */  addiu   $t2, $t2, 0xFFF0           ## $t2 = FFFFFFF0
.L8005996C:
/* 488CC 8005996C 000A5C00 */  sll     $t3, $t2, 16
/* 488D0 80059970 000B6403 */  sra     $t4, $t3, 16
/* 488D4 80059974 018D7004 */  sllv    $t6, $t5, $t4
/* 488D8 80059978 000E7C00 */  sll     $t7, $t6, 16
/* 488DC 8005997C 000FC403 */  sra     $t8, $t7, 16
/* 488E0 80059980 01381024 */  and     $v0, $t1, $t8
/* 488E4 80059984 03E00008 */  jr      $ra
/* 488E8 80059988 00000000 */  nop
/* 488EC 8005998C 00000000 */  nop
